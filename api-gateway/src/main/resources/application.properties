spring.application.name=api-gateway

# Server Configuration
server.port=${API_GATEWAY_PORT:8090}

# # Gateway Routes Configuration
# spring.cloud.gateway.routes[0].id=customer-service
# spring.cloud.gateway.routes[0].uri=${CUSTOMER_SERVICE_URL:http://customer-service:8081}
# spring.cloud.gateway.routes[0].predicates[0]=Path=/api/customers/**

# spring.cloud.gateway.routes[1].id=product-service
# spring.cloud.gateway.routes[1].uri=${PRODUCT_SERVICE_URL:http://product-service:8082}
# spring.cloud.gateway.routes[1].predicates[0]=Path=/api/products/**

# spring.cloud.gateway.routes[2].id=order-service
# spring.cloud.gateway.routes[2].uri=${ORDER_SERVICE_URL:http://order-service:8083}
# spring.cloud.gateway.routes[2].predicates[0]=Path=/api/orders/**

# spring.cloud.gateway.routes[3].id=payment-service
# spring.cloud.gateway.routes[3].uri=${PAYMENT_SERVICE_URL:http://payment-service:8084}
# spring.cloud.gateway.routes[3].predicates[0]=Path=/api/payments/**

# spring.cloud.gateway.routes[4].id=notification-service
# spring.cloud.gateway.routes[4].uri=${NOTIFICATION_SERVICE_URL:http://notification-service:8085}
# spring.cloud.gateway.routes[4].predicates[0]=Path=/api/notifications/**

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,gateway
management.endpoint.health.show-details=always

# Logging
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.com.burakpozut.api_gateway=DEBUG

# Kafka - reduce consumer noise (poll, commit, rebalance, etc.)
logging.level.org.apache.kafka=WARN
logging.level.org.springframework.kafka=WARN

# Swagger/OpenAPI Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha

# HTTP Access Logging
server.tomcat.accesslog.enabled=true
server.tomcat.accesslog.directory=logs
server.tomcat.accesslog.pattern=%t %a "%r" %s (%D ms)
server.tomcat.accesslog.suffix=.log

# Circuit Breaker Configuration for Gateway
resilience4j.circuitbreaker.configs.default.slidingWindowSize=10
resilience4j.circuitbreaker.configs.default.minimumNumberOfCalls=5
resilience4j.circuitbreaker.configs.default.failureRateThreshold=50
resilience4j.circuitbreaker.configs.default.waitDurationInOpenState=10s
resilience4j.circuitbreaker.configs.default.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.configs.default.automaticTransitionFromOpenToHalfOpenEnabled=true

customer.service.url=${CUSTOMER_SERVICE_URL:http://localhost:9081}
product.service.url=${PRODUCT_SERVICE_URL:http://localhost:9082}
order.service.url=${ORDER_SERVICE_URL:http://localhost:9083}
payment.service.url=${PAYMENT_SERVICE_URL:http://localhost:9084}
notification.service.url=${NOTIFICATION_SERVICE_URL:http://localhost:9085}
auth.service.url=${AUTH_SERVICE_URL:http://localhost:9086}

jwt.secret=${JWT_SECRET:20mPUOQTk7MS8rRAVz40i9G69b2UcdTqyRasbCARKMA=}
jwt.issuer=${JWT_ISSUER:auth-service}
# JWT Validation (set to false to bypass for testing)
jwt.validation.enabled=${JWT_VALIDATION_ENABLED:true}